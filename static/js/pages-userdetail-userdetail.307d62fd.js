(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-userdetail-userdetail"],{"0b3c":function(t,e,i){"use strict";i.r(e);var a=i("5f12"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},2746:function(t,e,i){var a=i("d809");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("48522a67",a,!0,{sourceMap:!1,shadowMode:!1})},3160:function(t,e,i){"use strict";var a=i("2746"),n=i.n(a);n.a},"33b3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={dataTime:function(t){var e=new Date(t),i=new Date,a=(e.getTime(),e.getHours()),n=e.getMinutes(),o=e.getFullYear(),s=e.getMonth()+1,r=e.getDate(),c=(i.getTime(),i.getHours(),i.getMinutes(),i.getFullYear()),d=i.getMonth(),l=i.getDate();return r===l&&s===d&&o===c?(a<10&&(a="0"+a),n<10&&(n="0"+n),a+":"+n):r+1===l&&s===d&&o===c?(a<10&&(a="0"+a),n<10&&(n="0"+n),"昨天"+a+":"+n):o+"/"+s+"/"+r},dataTime1:function(t){var e=new Date(t),i=new Date,a=(e.getTime(),e.getHours()),n=e.getMinutes(),o=e.getFullYear(),s=e.getMonth()+1,r=e.getDate(),c=(i.getTime(),i.getHours(),i.getMinutes(),i.getFullYear()),d=i.getMonth(),l=i.getDate();return r===l&&s===d&&o===c?(a<10&&(a="0"+a),n<10&&(n="0"+n),a+":"+n):r+1===l&&s===d&&o===c?(a<10&&(a="0"+a),n<10&&(n="0"+n),"昨天"+a+":"+n):o===c?(a<10&&(a="0"+a),n<10&&(n="0"+n),s+"月"+r+"日"+a+":"+n):(a<10&&(a="0"+a),n<10&&(n="0"+n),o+"年"+s+"月"+r+"日"+a+":"+n)},debounce:function(t,e){var i,a=e||500;return function(){var e=this,n=arguments;i&&clearTimeout(i),i=setTimeout((function(){i=null,t.apply(e,n)}),a)}},paixu:function(t,e,i){var a;if(0==i){for(var n=1;n<t.length;n++)for(var o=n;o>0;o--)t[o][e]>t[o-1][e]&&(a=t[o],t[o]=t[o-1],t[o-1]=a);return t}if(1==i){for(var s=1;s<t.length;s++)for(var r=s;r>0;r--)t[r][e]<t[r-1][e]&&(a=t[r],t[r]=t[r-1],t[r-1]=a);return t}}};e.default=a},"39b0":function(t,e,i){"use strict";i.r(e);var a=i("3a88"),n=i("0b3c");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("3160");var s,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"444b7db7",null,!1,a["a"],s);e["default"]=c.exports},"3a88":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"top-bar"},[a("v-uni-view",{staticClass:"top-bar-left"},[a("v-uni-image",{attrs:{src:i("6488")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backOne.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"top-bar-center"},[t._v("详情")])],1),a("v-uni-view",{staticClass:"face"},[a("v-uni-view",{staticClass:"text"},[t._v("头像")]),t.id==t.uid?a("v-uni-view",{staticClass:"head"},[a("image-cropper",{attrs:{src:t.tempFilePath},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}}),a("v-uni-image",{staticClass:"head-img",attrs:{src:t.cropFilePath},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}})],1):t._e(),t.id!=t.uid?a("v-uni-view",{staticClass:"head"},[a("v-uni-image",{staticClass:"head-img",attrs:{src:t.user.imgurl}})],1):t._e(),t.id==t.uid?a("v-uni-view",{staticClass:"more"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1):t._e()],1),t.id==t.uid?a("v-uni-view",{staticClass:"sign",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFriendAnimate("explain","签名",t.user.explain,!1)}}},[a("v-uni-view",{staticClass:"text"},[t._v("签名")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.user.explain))]),a("v-uni-view",{staticClass:"more1"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1)],1):t._e(),t.id!=t.uid?a("v-uni-view",{staticClass:"sign"},[a("v-uni-view",{staticClass:"text"},[t._v("签名")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.user.explain))])],1):t._e(),a("v-uni-view",{staticClass:"sign"},[a("v-uni-view",{staticClass:"text"},[t._v("注册")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.timeChange(t.user.time)))])],1),t.id==t.uid?a("v-uni-view",{staticClass:"sign",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFriendAnimate("name","昵称",t.user.name,!1)}}},[a("v-uni-view",{staticClass:"text"},[t._v("昵称")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.user.name))]),a("v-uni-view",{staticClass:"more1"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1)],1):t._e(),t.id!=t.uid?a("v-uni-view",{staticClass:"sign",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFriendAnimate("markname","昵称",t.user.name,!1)}}},[a("v-uni-view",{staticClass:"text"},[t._v("昵称")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.markname))]),a("v-uni-view",{staticClass:"more1"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1)],1):t._e(),a("v-uni-view",{staticClass:"sign"},[a("v-uni-view",{staticClass:"text"},[t._v("性别")]),a("v-uni-view",{staticClass:"customsign"},[t.id==t.uid?a("v-uni-picker",{attrs:{value:t.index,range:t.array},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindPickerChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.array[t.index]))])],1):t._e(),t.id!=t.uid?a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.array[t.index]))]):t._e()],1),t.id==t.uid?a("v-uni-view",{staticClass:"more1"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1):t._e()],1),a("v-uni-view",{staticClass:"sign"},[a("v-uni-view",{staticClass:"text"},[t._v("生日")]),a("v-uni-view",{staticClass:"customsign"},[t.id==t.uid?a("v-uni-picker",{attrs:{mode:"date",value:t.date,start:t.startDate,end:t.endDate},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.date))])],1):t._e(),t.id!=t.uid?a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.date))]):t._e()],1),t.id==t.uid?a("v-uni-view",{staticClass:"more1"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1):t._e()],1),t.id==t.uid?a("v-uni-view",{staticClass:"sign",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFriendAnimate("phone","电话",t.user.phone,!1)}}},[a("v-uni-view",{staticClass:"text"},[t._v("电话")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.user.phone))]),t.id==t.uid?a("v-uni-view",{staticClass:"more1"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1):t._e()],1):t._e(),t.id!=t.uid?a("v-uni-view",{staticClass:"sign"},[a("v-uni-view",{staticClass:"text"},[t._v("电话")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.user.phone))])],1):t._e(),t.id==t.uid?a("v-uni-view",{staticClass:"sign",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFriendAnimate("email","邮箱",t.user.email,!0)}}},[a("v-uni-view",{staticClass:"text"},[t._v("邮箱")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.user.email))]),a("v-uni-view",{staticClass:"more1"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1)],1):t._e(),t.id!=t.uid?a("v-uni-view",{staticClass:"sign"},[a("v-uni-view",{staticClass:"text"},[t._v("邮箱")]),a("v-uni-view",{staticClass:"customsign"},[t._v(t._s(t.user.email))])],1):t._e(),t.id==t.uid?a("v-uni-view",{staticClass:"sign",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFriendAnimate("psw","密码","",!0)}}},[a("v-uni-view",{staticClass:"text"},[t._v("密码")]),a("v-uni-view",{staticClass:"customsign"},[t._v("********")]),a("v-uni-view",{staticClass:"more1"},[a("v-uni-image",{attrs:{src:i("8939"),mode:"aspectFill"}})],1)],1):t._e(),t.id==t.uid?a("v-uni-view",{staticClass:"exit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.quit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"exitButton"},[t._v("退出登录")])],1):t._e(),t.id!=t.uid?a("v-uni-view",{staticClass:"exit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteFriend.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"exitButton"},[t._v("删除好友")])],1):t._e(),a("v-uni-view",{staticClass:"pop-up",attrs:{animation:t.animationData}},[a("v-uni-view",{staticClass:"pop-up-header"},[a("v-uni-view",{staticClass:"cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFriendAnimate.apply(void 0,arguments)}}},[t._v("取消")]),a("v-uni-view",{staticClass:"pop-up-center"},[t._v("签名")]),a("v-uni-view",{staticClass:"sure",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ensure.apply(void 0,arguments)}}},[t._v("确定")])],1),a("v-uni-view",{staticClass:"grey-box"},[a("v-uni-textarea",{staticClass:"grey-text",model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),a("v-uni-input",{staticClass:"grey-text1",style:t.ispwd?"display:block":"display:none",attrs:{type:"text",placeholder:"请输入密码","placeholder-style":"color:#bbb;font-weight:400"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1)],1)],1)},o=[]},4736:function(t,e,i){var a=i("61d7");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("50c923d3",a,!0,{sourceMap:!1,shadowMode:!1})},"58d6":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"cropper",staticClass:"vue-cropper",style:{top:t.containerTop+"px"},attrs:{catchtouchmove:"false"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"cropper-box"},[i("v-uni-view",{staticClass:"cropper-box-canvas",style:{width:t.imageWidth+"px",height:t.imageHeight+"px",transform:"scale("+t.scale+","+t.scale+") translate3d("+t.x/t.scale+"px,"+t.y/t.scale+"px,0)rotateZ("+90*t.rotate+"deg)"},on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgTouchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgMoveing.apply(void 0,arguments)},touchend:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgMoveEnd.apply(void 0,arguments)}}},[i("v-uni-image",{ref:"cropperImg",staticClass:"uni-image",attrs:{src:t.src,alt:"cropper-img",mode:"scaleToFill"}})],1)],1),i("v-uni-view",{staticClass:"cropper-drag-box cropper-modal cropper-move pointer-events"}),i("v-uni-view",{staticClass:"cropper-crop-box",class:{"pointer-events":t.cropFixed},style:{width:t.cropW+"px",height:t.cropH+"px",transform:"translate3d("+t.cropOffsertX+"px,"+t.cropOffsertY+"px,0)"}},[i("v-uni-view",{staticClass:"cropper-view-box"},[i("v-uni-image",{style:{width:t.imageWidth+"px",height:t.imageHeight+"px",transform:"scale("+t.scale+","+t.scale+") translate3d("+(t.x-t.cropOffsertX)/t.scale+"px,"+(t.y-t.cropOffsertY)/t.scale+"px,0)rotateZ("+90*t.rotate+"deg)"},attrs:{mode:"scaleToFill",src:t.src,alt:"cropper-img"}})],1),t.cropFixed?t._e():i("v-uni-view",{staticClass:"cropper-face cropper-move",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.cropMoveing.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"crop-line line-w"}),i("v-uni-view",{staticClass:"crop-line line-a"}),i("v-uni-view",{staticClass:"crop-line line-s"}),i("v-uni-view",{staticClass:"crop-line line-d"}),t.cropFixed?t._e():[i("v-uni-view",{staticClass:"crop-point point-lt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"left-top")}}}),i("v-uni-view",{staticClass:"crop-point point-mt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-top")}}}),i("v-uni-view",{staticClass:"crop-point point-rt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"right-top")}}}),i("v-uni-view",{staticClass:"crop-point point-ml",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-left")}}}),i("v-uni-view",{staticClass:"crop-point point-mr",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-right")}}}),i("v-uni-view",{staticClass:"crop-point point-lb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"left-bottom")}}}),i("v-uni-view",{staticClass:"crop-point point-mb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-bottom")}}}),i("v-uni-view",{staticClass:"crop-point point-rb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"right-bottom")}}})]],2),i("v-uni-canvas",{staticClass:"cropper-canvas",style:{width:t.cropW+"px",height:t.cropH+"px"},attrs:{id:"myCanvas","canvas-id":"myCanvas"}}),i("v-uni-view",{staticClass:"btn-group"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showResetBtn,expression:"showResetBtn"}],staticClass:"btn-item reset-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.init.apply(void 0,arguments)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showRotateBtn,expression:"showRotateBtn"}],staticClass:"btn-item rotate-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.rotateHandler.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"uni-info__ft"},[i("v-uni-view",{staticClass:"uni-modal__btn uni-modal__btn_default",staticStyle:{color:"rgb(0, 0, 0)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{staticClass:"uni-modal__btn uni-modal__btn_primary",staticStyle:{color:"rgb(0, 122, 255)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)},o=[]},"5f12":function(t,e,i){"use strict";var a=i("4ea4");i("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("ca9f")),o=a(i("33b3")),s={components:{ImageCropper:n.default},data:function(){var t=this.getDate({format:!0});return{id:"",uid:"",myname:"",token:"",user:"",markname:"",cropFilePath:"../../static/images/index/10.png",array:["未知","男","女"],index:0,date:t,tempFilePath:"",animationData:{},isAdd:!1,pwd:void 0,type:"",data:"",oldData:"",modifyTitle:"",ispwd:!1}},onLoad:function(t){this.id=t.id,this.getStorages(),this.getUser(),this.getMarkName()},methods:{getStorages:function(){try{var t=uni.getStorageSync("user");t?(this.uid=t.id,this.token=t.token,this.myname=t.name):uni.navigateTo({url:"../signin/signin"})}catch(e){}},getUser:function(){var t=this;uni.request({url:this.serverUrl+"/user/detail",data:{id:this.id,token:this.token},method:"POST",success:function(e){var i=e.data.status;if(200==i){var a=e.data.result;if(a.imgurl=t.serverUrl+"/user/"+a.imgurl,t.cropFilePath=a.imgurl,void 0==a.explain&&(a.explain="这个人很懒，什么都留下了~"),void 0==a.birth)t.date="0000-00-00";else{var n=o.default.dataTime(a.birth);t.date=n}void 0==a.phone&&(a.phone="000"),0==t.markname.length&&(t.markname=a.name),t.sexJudge(a.sex),t.user=a}else 500==i?uni.showToast({title:"服务器出错啦",icon:"none",duration:1500}):300==i&&uni.navigateTo({url:"../signin/signin?name="+t.myname})}})},getMarkName:function(){var t=this;this.id!=this.uid&&uni.request({url:this.serverUrl+"/user/getmarkname",data:{uid:this.uid,fid:this.id,token:this.token},method:"POST",success:function(e){var i=e.data.status;if(200==i){var a=e.data.result;void 0!=a.markname&&(t.markname=a.markname)}else 300==i?uni.navigateTo({url:"../signin/signin?name="+t.myname}):500==i&&uni.showToast({title:"服务器出错啦",icon:"none",duration:1500})}})},sexJudge:function(t){this.index="female"==t?2:"male"==t?1:0},timeChange:function(t){return o.default.dataTime(t)},ensure:function(){if(this.data.length>0&&this.data!=this.oldData)if("markname"==this.type)this.updateFriendName(),this.markname=this.data;else if("email"==this.type){var t=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;t.test(this.data)?this.update(this.data,this.type,this.pwd):uni.showToast({title:"邮箱格式错误",icon:"none",duration:1500})}else this.update(this.data,this.type,this.pwd);this.addFriendAnimate()},addFriendAnimate:function(t,e,i,a){this.pwd=a?"0":void 0,this.ispwd=a,this.type=t,this.modifyTitle=e,this.oldData=i,this.data=i,this.isAdd=!this.isAdd;var n=uni.createAnimation({duration:300,timingFunction:"ease"});this.isAdd?n.top(0).step():n.top("100%").step(),this.animationData=n.export(),this.modifyTitle=""},backOne:function(){uni.navigateBack({delta:1})},bindPickerChange:function(t){var e=this.index;if(this.index=t.target.value,this.index!=e){var i="asexual";2==this.index?i="female":1==this.index&&(i="male"),this.update(i,"sex",void 0)}},bindDateChange:function(t){var e=this.date;this.date=t.target.value,this.date!=e&&this.update(this.date,"birth",void 0)},getDate:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return"start"===t?i-=60:"end"===t&&(i+=2),a=a>9?a:"0"+a,n=n>9?n:"0"+n,"".concat(i,"-").concat(a,"-").concat(n)},upload:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.tempFilePath=e.tempFilePaths.shift()}})},confirm:function(t){var e=this;this.tempFilePath="",this.cropFilePath=t.detail.tempFilePath,this.headimg=t.detail.tempFilePath,uni.uploadFile({url:this.serverUrl+"/files/upload",filePath:this.headimg,name:"file",fileType:"image",formData:{url:"user",name:this.uid,token:this.token},success:function(i){var a=i.data;console.log(a);try{uni.setStorageSync("user",{id:e.id,name:e.name,imgurl:a,token:e.token})}catch(t){console.log("数据存储出错")}e.update(a,"imgurl",void 0)},fail:function(t){console.log("this is errormes "+t.message)}})},cancel:function(){console.log("canceled"),this.tempFilePath=""},update:function(t,e,i){var a=this;uni.request({url:this.serverUrl+"/user/update",data:{id:this.uid,data:t,token:this.token,type:e,pwd:i},method:"POST",success:function(i){var n=i.data.status;200==n?(a.user[e]=t,"psw"==e&&(uni.removeStorage({key:"user",success:function(t){console.log("sucess")}}),uni.navigateTo({url:"../signin/signin?cgpwd="+a.myname}))):400==n?uni.showToast({title:"输入原始密码错误",icon:"none",duration:1500}):600==n?uni.showToast({title:"密码已被占用",icon:"none",duration:1500}):300==n?uni.navigateTo({url:"../signin/signin?name="+a.myname}):500==n&&uni.showToast({title:"服务器出错啦",icon:"none",duration:1500})}})},updateFriendName:function(){var t=this;this.data.length>0&&this.data!=this.oldData&&uni.request({url:this.serverUrl+"/user/updatemarkname",data:{uid:this.uid,fid:this.id,name:this.data,token:this.token},method:"POST",success:function(e){var i=e.data.status;200==i||(300==i?uni.navigateTo({url:"../signin/signin?name="+t.myname}):500==i&&uni.showToast({title:"服务器出错啦",icon:"none",duration:1500}))}})},quit:function(){uni.removeStorage({key:"user",success:function(t){console.log("sucess")}}),uni.navigateTo({url:"../signin/signin"})},deleteFriend:function(){var t=this;uni.showModal({title:"提示",content:"确定删除该好友吗？",success:function(e){e.confirm?(console.log("用户点击确定"),uni.request({url:t.serverUrl+"/friend/deletefriend",data:{uid:t.uid,fid:t.id,token:t.token},method:"POST",success:function(e){var i=e.data.status;200==i?uni.navigateTo({url:"../index/index"}):300==i?uni.navigateTo({url:"../signin/signin?name="+t.myname}):500==i&&uni.showToast({title:"服务器出错啦",icon:"none",duration:1500})}})):e.cancel&&console.log("用户点击取消")}})}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}}};e.default=s},"61d7":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@font-face{font-family:iconfont;src:url("data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAR4AAsAAAAACKgAAAQsAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCDBgqEfIRGATYCJAMMCwgABCAFhG0HShugB8gOJUHBwAAAAAFEBNmwzd4dtatSmmpFoVAEhUThEAYkCozFKDCqCVO6RfH/89v869awDnTR1qrSANFt4GG4SNxreBn91fmV9f3+53J613ieHba+N1zmGM8PA7oXTaCAxpjei8IoLWFsGLu4jPME6vWJJdovqmgAO4U2LRBnep0K7GJmpYQWanXVOWuLuAFrtenK4haAa/f38QnKsCOpyrRFh6eFWsh5KXnfYcn958BGQNKfE8wmMmaAQpzkuo9Z+ukZluoltVV5abUipL5i/ysArlhWVut/eCRBVNPUjYg6oUo7JTHFoaYDSvdacnKTq9GAB4AY5y2dtL3qpFh1DENdnJC6Hq+xYb7pyRMDMzc/fYoJjY8flwO3m98rMucF+IZHj6Cagw5UeKpxyFbt2rHGY/8jpa7CYMvLfcIesLjY3bdqhaf+nqgQs2qT/+rjCH/VfA0VFGuAC3iE8NEr/Vau8vZsXiUy7+V3c3tQQXMAuNjDCC89KDIHH0OFhnUi81GEPwyc7wZUaN7DnUf4g+ZLQsMKYV/94NjK7R7TEM4niTY1oJ5zEU62aNVaasUub08YLUEam5EnT6a61/I17dNk+vTu9jpJjXhsTFwjqTtpCBxBIIgS6iQnc/Zod1YGKp0rAwsD8kkyP6AwcK0hcAwkiQmBhWvxPZWKDu86aUH2nLEdi9rGX1eXq5P6A1SrnAucMVMdZH/GKi/jyfCqJyucfK3mXpVujXOPfFf5LC4Dvx0X/943JyOq4HuCTZ8KiIPPAb6ro8akpT6ufiq39BQrNlk5mp8pO0JlJLk8f5QalRjoP60IMx0N8n7wGhSD3n6/F1zlcTVz/cR+Ev0lkLSTd7UiPbD/wCxGRMA2Krwro2O0bTQtImbwhjAJc0S3N4ROx15/PH60IzaIOjCbEelqkDOfETNxb/FMixnWNzeJp2KPQw9A5d76jGUOQOUvH7RE/o2RfkNatd3OGf9q0QKbnq8WB7qy+hVqJRjJn1BQgP/iErks0yy5iGJTrOayW7C/z0IoZH0qNH+7N+31XXc7G2p1hZDU6IWs1ghaqDNQpcEKVKu1BfWmFW9u0IFhKUodpswCEFodgqTZHWStbqOF+hqqdPsG1VrDEuodhfueDcZCj+QzuIrFtZh6BNNraIowbCzi1dbhOlOfionKXHoTzgzoY5hCKk/minEKZ/pYMDCoU7IsgREM3Y8Vgcvwvj4aMzK0AdewUpJljWkyGZH3IKmG7gfEHgZOhYXTwqiNwOhp0CiE3ZiFpL5fB6dj0keFKcGV+JvgGAP0vWMUpOQ10GI1VQt3LoMHDNJRYrEIPInAoPXDFEEnrk9P0zDG/FEGOA2WFNkiaZRGhuoRddXS8bX917cL6mn9c6TIUXSekybKHKQfJXFq2KSiRklLYU8dNKWDIX0cAA==") format("woff2")}\n@font-face{font-family:iconfont;  /* project id 997741 */src:url(https://at.alicdn.com/t/font_997741_k4k7vblf4i.eot);src:url(https://at.alicdn.com/t/font_997741_k4k7vblf4i.eot#iefix) format("embedded-opentype"),url(https://at.alicdn.com/t/font_997741_k4k7vblf4i.woff2) format("woff2"),url(https://at.alicdn.com/t/font_997741_k4k7vblf4i.woff) format("woff"),url(https://at.alicdn.com/t/font_997741_k4k7vblf4i.ttf) format("truetype"),url(https://at.alicdn.com/t/font_997741_k4k7vblf4i.svg#iconfont) format("svg")}.vue-cropper[data-v-7c0a39fb]{position:fixed;height:100vh;left:0;right:0;bottom:0;z-index:998;box-sizing:border-box;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;direction:ltr;touch-action:none;text-align:left;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC")}.cropper-canvas[data-v-7c0a39fb]{position:absolute;top:-9999px;left:-9999px;z-index:-998}.vue-cropper .uni-info__ft[data-v-7c0a39fb]{position:absolute;line-height:48px;font-size:18px;display:-webkit-box;display:-webkit-flex;display:flex;\n\n\ntop:0;\nleft:0;right:0;z-index:998}.btn-group[data-v-7c0a39fb]{position:absolute;right:30px;bottom:100px;z-index:998}.btn-item[data-v-7c0a39fb]{position:relative;width:40px;height:40px;background:#fff;border-radius:20px;padding:10px;text-align:center;display:inline-block;margin-left:10px}.btn-item[data-v-7c0a39fb]:active{background:#ccc}.iconfont[data-v-7c0a39fb]{font-family:iconfont!important;font-size:24px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:20px}.rotate-btn[data-v-7c0a39fb]{font-family:iconfont!important;font-size:24px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:20px}.rotate-btn[data-v-7c0a39fb]:before{content:"\\e65c";margin-left:-2px}.reset-btn[data-v-7c0a39fb]{font-family:iconfont!important;font-size:24px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:20px}.reset-btn[data-v-7c0a39fb]:before{content:"\\e648";margin-left:-2px}.vue-cropper .uni-info__ft[data-v-7c0a39fb]:after{content:" ";position:absolute;left:0;top:0;right:0;height:1px;border-top:1px solid #d5d5d6;color:#d5d5d6;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5);z-index:998}.vue-cropper .uni-modal__btn[data-v-7c0a39fb]{display:block;-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#3cc51f;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative;text-align:center;background-color:#fff;z-index:999}.vue-cropper .uni-modal__btn[data-v-7c0a39fb]:first-child:after{display:none}.vue-cropper .uni-modal__btn[data-v-7c0a39fb]:after{content:" ";position:absolute;left:0;top:0;width:1px;bottom:0;border-left:1px solid #d5d5d6;color:#d5d5d6;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleX(.5);transform:scaleX(.5);z-index:998}.vue-cropper .uni-modal__btn[data-v-7c0a39fb]:active{background-color:#eee}.cropper-box[data-v-7c0a39fb],\n    .cropper-box-canvas[data-v-7c0a39fb],\n    .cropper-drag-box[data-v-7c0a39fb],\n    .cropper-crop-box[data-v-7c0a39fb],\n    .cropper-face[data-v-7c0a39fb]{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-user-select:none;user-select:none;z-index:998}.uni-image[data-v-7c0a39fb]{width:100%;height:100%}.cropper-box-canvas uni-image[data-v-7c0a39fb]{position:relative;text-align:left;-webkit-user-select:none;user-select:none;-webkit-transform:none;transform:none;max-width:none;max-height:none;z-index:998}.cropper-box[data-v-7c0a39fb]{overflow:hidden}.cropper-move[data-v-7c0a39fb]{cursor:move}.cropper-crop[data-v-7c0a39fb]{cursor:crosshair}.cropper-modal[data-v-7c0a39fb]{background:rgba(0,0,0,.5)}.pointer-events[data-v-7c0a39fb]{pointer-events:none}.cropper-crop-box[data-v-7c0a39fb]{\n        /*border: 2px solid #39f;*/}.cropper-view-box[data-v-7c0a39fb]{display:block;overflow:hidden;width:100%;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);-webkit-user-select:none;user-select:none}.cropper-view-box uni-image[data-v-7c0a39fb]{-webkit-user-select:none;user-select:none;text-align:left;max-width:none;max-height:none}.cropper-face[data-v-7c0a39fb]{top:0;left:0;background-color:#fff;opacity:.1}.crop-line[data-v-7c0a39fb]{position:absolute;display:block;width:100%;height:100%;opacity:.1;z-index:998}.line-w[data-v-7c0a39fb]{top:-3px;left:0;height:5px;cursor:n-resize}.line-a[data-v-7c0a39fb]{top:0;left:-3px;width:5px;cursor:w-resize}.line-s[data-v-7c0a39fb]{bottom:-3px;left:0;height:5px;cursor:s-resize}.line-d[data-v-7c0a39fb]{top:0;right:-3px;width:5px;cursor:e-resize}.crop-point[data-v-7c0a39fb]{position:absolute;width:8px;height:8px;opacity:.75;background-color:#39f;border-radius:100%;z-index:998}.point-lt[data-v-7c0a39fb]{top:-4px;left:-4px;cursor:nw-resize}.point-mt[data-v-7c0a39fb]{top:-5px;left:50%;margin-left:-3px;cursor:n-resize}.point-rt[data-v-7c0a39fb]{top:-4px;right:-4px;cursor:ne-resize}.point-ml[data-v-7c0a39fb]{top:50%;left:-4px;margin-top:-3px;cursor:w-resize}.point-mr[data-v-7c0a39fb]{top:50%;right:-4px;margin-top:-3px;cursor:e-resize}.point-lb[data-v-7c0a39fb]{bottom:-5px;left:-4px;cursor:sw-resize}.point-mb[data-v-7c0a39fb]{bottom:-5px;left:50%;margin-left:-3px;cursor:s-resize}.point-rb[data-v-7c0a39fb]{bottom:-5px;right:-4px;cursor:se-resize}',""]),t.exports=e},6488:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAWJQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARNCZVwAAAHV0Uk5TAAqw4TAJvGQIub8Gs8QMBbHGDQOozRGnzhKlz6PQEwGa1xeY2BiW2RmU2hqK4B+IIIbiIYPjI4HoKHUqc+krceosbesu/O16/TeP9F2eAtKf1ATTFqkVq8ysy7QHEMq1ybYPyLfHuAvAwb7CvcO7usUOsnw+sN21uwAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAAEgAAABIAEbJaz4AAAEzSURBVEjHldVHU8JQAEXhIEYpKhYExY699y5W7L0jICr2Xs//9y3Zkft2mfnOvEwWuZaV57gK3IX5TO6xi6BY8B4v+DzOvb8ESsuc+0A5VFQ691VBqA4JPgw1tYKPQJ3i66Gh0blvaoaWqOBboa1d8B3Q2SX4bujpde6tPugfEPwguIcEPwwjo4Ifg/EJwU/C1LTgZ4yfFfwcxOYFvwCLS4JfhpW44OOrrEl/iHU2NhVvbbEdkIId2N1TAs8+HEhF9BDCR1JxDEGpODFvdSoVZ6Y4l75VKAEXWpGEVFopLjNwpRXXcCOMgmVlb+FOK+7hwVaKxyfwaoUPnoWxMsULvEqF6w3ehYEzxYeZUKmwP+HrWynSZqaTwoyaYf+BhDCM5o4UZLJSYe74VQLLH4n95T7/A31gTS9tt9y3AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTEwLTI1VDIxOjIzOjM5KzA4OjAwgbYBkAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0xMC0yNVQyMToyMzozOSswODowMPDruSwAAABJdEVYdHN2ZzpiYXNlLXVyaQBmaWxlOi8vL2hvbWUvYWRtaW4vaWNvbi1mb250L3RtcC9pY29uX284cXh5NzV1bWRrL2Zhbmh1aS5zdmcHm87yAAAAAElFTkSuQmCC"},8188:function(t,e,i){"use strict";var a=i("4736"),n=i.n(a);n.a},8939:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAHAAAAABkvfSiAAABeUlEQVRIDc3Wu07DMBQAUDuPlq0wNC1SVYmJgVKGKIAYUNb8Vf+qfwBDx7YSSIFm4FElEZUKKWlEbLhDpCpKXMfxgBc7udf3WM4Tof/WRqORInNNmFXMtu2DZfh5q1K06feNyXg83rLyeWLM1QcB0nCKdEJQa7EIrx3HafIUZeWorGAQeEm324sppR2MaWO1+jYs62Lpum7KmseKMUGY6Ptva5noXlA2ygXKRLlBWWglUAZaGayLCoF1UGFQFK0FFqEf66/j87PTd8/zfiCeb7VBKAgvh3b7JEEoNTDFehSRVhi+vuQxOGa+S4smFJ0zTVNXlKSXxTSN+Nk439cGAYtjfEkIPYTiitJ4nE4nz3koO2Z+nrKksr4Im8/v3bJ8OC8MimDCoCgGYOW7NI+pavPhbxufoBhPq7SlRdhsdseNwYK4QRkYNygL4wJlYgDuffCjrWJlDzXcIFWvGSC7jQnCbyFOyRFMkIHtwqXjweCqMxzeGKUJFQO/QY072rCUloEAAAAASUVORK5CYII="},"8b44":function(t,e,i){"use strict";i.r(e);var a=i("feae"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},ca9f:function(t,e,i){"use strict";i.r(e);var a=i("58d6"),n=i("8b44");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("8188");var s,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"7c0a39fb",null,!1,a["a"],s);e["default"]=c.exports},d809:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container[data-v-444b7db7]{width:100%;min-width:%?320?%;max-width:%?750?%;height:%?1536?%;margin:0 auto;display:flex;flex-direction:column}.container .top-bar[data-v-444b7db7]{border-bottom:1px solid rgba(39,40,50,.1);display:flex;margin-bottom:%?42?%}.container .top-bar .top-bar-left[data-v-444b7db7]{padding-left:%?24?%;padding-top:%?20?%}.container .top-bar .top-bar-left uni-image[data-v-444b7db7]{width:%?48?%;height:%?48?%}.container .top-bar .top-bar-center[data-v-444b7db7]{padding-top:%?16?%;padding-bottom:%?16?%;margin-left:%?264?%;font-size:20px;color:#272832}.container .face[data-v-444b7db7]{height:%?148?%;display:flex;align-items:center}.container .face .text[data-v-444b7db7]{font-size:%?32?%;color:#272832;line-height:%?44?%;padding-left:%?32?%}.container .face .head[data-v-444b7db7]{height:%?104?%;width:%?104?%;margin-left:%?32?%}.container .face .head .head-img[data-v-444b7db7]{width:%?104?%;height:%?104?%;border-radius:%?20?%}.container .face .more[data-v-444b7db7]{width:%?28?%;height:%?28?%;margin-left:%?466?%}.container .face .more uni-image[data-v-444b7db7]{width:%?28?%;height:%?28?%}.container .sign[data-v-444b7db7]{height:%?148?%;display:flex;align-items:center}.container .sign .text[data-v-444b7db7]{font-size:%?32?%;color:#272832;line-height:%?44?%;padding-left:%?32?%}.container .sign .customsign[data-v-444b7db7]{flex:1;font-size:%?32?%;color:rgba(39,40,50,.6);line-height:%?44?%;margin-left:%?32?%;margin-right:%?12?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;overflow:hidden}.container .sign .more1[data-v-444b7db7]{width:%?28?%;height:%?28?%;padding-right:%?26?%}.container .sign .more1 uni-image[data-v-444b7db7]{width:%?28?%;height:%?28?%}.container .exit[data-v-444b7db7]{display:flex;justify-content:center;align-items:center;margin-top:%?160?%;padding-left:%?32?%;padding-right:%?32?%;padding-bottom:%?76?%;width:%?684?%;height:%?80?%}.container .exit .exitButton[data-v-444b7db7]{line-height:%?44?%;font-size:%?32?%;color:#ff5d5b}.pop-up[data-v-444b7db7]{position:fixed;top:100%;left:0;width:100%;height:100%;display:flex;flex-direction:column;background-color:#fff;font-family:PingFangSC-Regular}.pop-up .pop-up-header[data-v-444b7db7]{display:flex;align-items:center;justify-content:space-around;height:%?88?%;border-bottom:1px solid rgba(39,40,50,.1)}.pop-up .pop-up-header .cancel[data-v-444b7db7]{line-height:%?44?%;font-size:%?32?%;margin-right:%?204?%}.pop-up .pop-up-header .pop-up-center[data-v-444b7db7]{line-height:%?56?%;font-size:%?40?%}.pop-up .pop-up-header .sure[data-v-444b7db7]{line-height:%?44?%;font-size:%?32?%;margin-left:%?202?%;color:#4aaaff}.pop-up .grey-box[data-v-444b7db7]{width:%?686?%;height:%?500?%;margin-left:%?32?%;margin-right:%?32?%;margin-top:%?34?%;display:flex;flex-direction:column;align-items:center}.pop-up .grey-box .grey-text[data-v-444b7db7]{border-radius:%?20?%;background:#f3f4f6;margin-bottom:%?20?%;line-height:%?44?%;font-size:%?32?%;color:#272832;padding-left:%?22?%;padding-top:%?16?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:8;overflow:hidden}.pop-up .grey-box .grey-text1[data-v-444b7db7]{border-radius:%?20?%;background:#f3f4f6;line-height:%?44?%;font-size:%?32?%;color:#272832;padding-left:%?22?%;margin-top:%?30?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden}',""]),t.exports=e},feae:function(t,e,i){"use strict";i("a9e3"),i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"image-cropper",props:{cropWidth:{type:Number,default:200},cropHeight:{type:Number,default:200},cropFixed:{type:Boolean,default:!1},iszoom:{type:Boolean,default:!1},src:{type:String},showResetBtn:{type:Boolean,default:!0},showRotateBtn:{type:Boolean,default:!0},proportion:{type:Number,default:0}},data:function(){var t=uni.getSystemInfoSync(),e=t.pixelRatio;return{show:!1,scale:1,rotate:0,cropW:0,cropH:0,cropOldW:0,cropOldH:0,sysInfo:t,pixelRatio:e,imageRealWidth:0,imageRealHeight:0,cropOffsertX:0,cropOffsertY:0,startX:0,startY:0,border:5,x:0,y:0,startL:0,oldScale:1,scaling:!1}},watch:{src:function(t){t.length>0&&this.init()},show:function(t){}},computed:{containerTop:function(){var t=0;return t=44,t},containerHeight:function(){return this.windowHeight-48},windowWidth:function(){return this.sysInfo.windowWidth},windowHeight:function(){return this.sysInfo.windowHeight},imageRatio:function(){return this.imageRealHeight>0?this.imageRealWidth/this.imageRealHeight:0},imageWidth:function(){return this.imageRatio>=1?this.windowWidth:this.windowWidth*this.imageRatio},imageHeight:function(){return this.imageRatio>=1?this.windowWidth/this.imageRatio:this.windowWidth}},methods:{moveHandle:function(){},rotateHandler:function(){3==this.rotate?this.rotate=0:++this.rotate},init:function(){this.rotate=0,this.scale=1,this.cropW=this.cropWidth,this.cropH=this.cropHeight,uni.showLoading({title:"图片加载中..."}),this.loadImage(this.src).then((function(t){uni.hideLoading()})).catch((function(t){uni.hideLoading(),uni.showModal({title:"标题",content:"图片加载失败"})}))},loadImage:function(t){var e=this;return new Promise((function(i,a){uni.getImageInfo({src:t,success:function(t){e.imageRealWidth=t.width,e.imageRealHeight=t.height,e.cropOffsertX=e.windowWidth/2-e.cropW/2,e.cropOffsertY=e.windowHeight/2-e.cropH/2,e.show=!0,e.$nextTick((function(){e.x=e.windowWidth/2-e.imageWidth/2,e.y=e.containerHeight/2-e.imageHeight/2})),i(t)},fail:function(t){e.show=!1,a(t)}})})).catch((function(t){}))},cancel:function(){this.show=!1,this.$emit("cancel")},confirm:function(t){uni.showLoading({title:"裁剪中..."}),this.iszoom?(this.pixelRatio=1,console.log("this is fixed")):0!=this.proportion&&(this.proportion=this.pixelRatio);var e=this,i=uni.createCanvasContext("myCanvas",e),a=e.pixelRatio,n=e.src,o=e.imageWidth*e.scale,s=e.imageHeight*e.scale,r=e.rotate,c=e.cropOffsertX-e.x-(e.imageWidth-o)/2,d=e.cropOffsertY-e.y-(e.imageHeight-s)/2;switch(i.setFillStyle("white"),i.fillRect(0,0,o,s),i.save(),i.rotate(90*r*Math.PI/180),r){case 1:c+=(s-o)/2,d-=(s-o)/2,i.drawImage(n,-d,c,o,-s);break;case 2:i.drawImage(n,c,d,-o,-s);break;case 3:c+=(s-o)/2,d-=(s-o)/2,i.drawImage(n,d,-c,-o,s);break;default:i.drawImage(n,-c,-d,o,s);break}i.restore(),i.draw(!1,(function(){uni.canvasToTempFilePath({canvasId:"myCanvas",destWidth:e.cropW*a,destHeight:e.cropH*a,success:function(i){uni.hideLoading(),t.detail.tempFilePath=i.tempFilePath,console.log(),e.show=!1,e.$emit("confirm",t)},fail:function(t){uni.hideLoading(),uni.showModal({title:"提示",content:"裁剪失败"})}},e)}))},imgTouchStart:function(t){if(t.touches.length>=2){this.oldScale=this.scale,this.scaling=!0;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));this.startL=Math.max(e,i,a)}else 1==t.touches.length&&(this.scaling=!0,this.startX=t.touches[0].pageX-this.x,this.startY=t.touches[0].pageY-this.y)},imgMoveing:function(t){if(this.scaling&&t.touches.length>=2){var e=this.oldScale;console.log("双指");var i=t.touches[0].pageX-t.touches[1].pageX,a=t.touches[0].pageY-t.touches[1].pageY,n=Math.sqrt(Math.pow(i,2)+Math.pow(a,2)),o=Math.max(i,a,n),s=o-this.startL,r=1;r=r/this.imageWidth>r/this.imageHeight?r/this.imageHeight:r/this.imageWidth,r=r>.1?.1:r;var c=r*s;s>0?e+=Math.abs(c):s<0&&e>Math.abs(c)&&(e-=Math.abs(c)),this.scale=e}else if(this.scaling&&1==t.touches.length){var d=t.touches[0].pageX-this.startX,l=t.touches[0].pageY-this.startY;console.log("单指"),this.x=d,this.y=l}},imgMoveEnd:function(){this.scaling&&(this.scaling=!1)},touchStart:function(t){this.scaling||(this.startX=t.touches[0].pageX-this.cropOffsertX,this.startY=t.touches[0].pageY-this.cropOffsertY,this.cropOldW=this.cropW,this.cropOldH=this.cropH)},cropMoveing:function(t){if(!this.scaling){var e=this._cropX(t.touches[0].pageX-this.startX),i=this._cropY(t.touches[0].pageY-this.startY);this.cropOffsertX=e,this.cropOffsertY=i}},dragMove:function(t,e){if(this.cropFixed)return!1;var i=t.touches[0].pageX-this.startX,a=t.touches[0].pageY-this.startY;switch(e){case"left-top":this._cropMoveLeft(i),this._cropMoveTop(a);break;case"middle-top":this._cropMoveTop(a);break;case"right-top":this._cropMoveTop(a),this._cropMoveRight(i);break;case"middle-right":this._cropMoveRight(i);break;case"right-bottom":this._cropMoveRight(i),this._cropMoveBottom(a);break;case"middle-bottom":this._cropMoveBottom(a);break;case"left-bottom":this._cropMoveBottom(a),this._cropMoveLeft(i);break;case"middle-left":this._cropMoveLeft(i);break;default:break}},_cropMoveTop:function(t){var e=this._cropY(t);this.cropH+=this.cropOffsertY-e,this.cropOffsertY=e},_cropMoveRight:function(t){if(this.cropOldW+t>=this.windowWidth-this.border)return!1;this.cropW=this.cropOldW+(t-this.cropOffsertX)},_cropMoveBottom:function(t){if(this.cropOldH+t>=this.windowHeight-this.containerTop-this.border)return!1;this.cropH=this.cropOldH+(t-this.cropOffsertY)},_cropMoveLeft:function(t){var e=this._cropY(t);this.cropW+=this.cropOffsertX-e,this.cropOffsertX=e},_cropX:function(t){return t<=this.border?this.border:t+this.cropW>=this.windowWidth-this.border?this.windowWidth-this.cropW-this.border:t},_cropY:function(t){return t<=this.border?this.border:t+this.cropH>=this.windowHeight-this.containerTop-this.border?this.windowHeight-this.cropH-this.containerTop-this.border:t}}};e.default=a}}]);